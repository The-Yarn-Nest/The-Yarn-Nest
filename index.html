<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-13EX1KGVQ0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-13EX1KGVQ0');
  </script>

  <meta charset="UTF-8">
  <title>The Yarn Nest</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: #fdf4fc;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: 'Segoe UI', sans-serif;
    }
    .logo {
      width: 150px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 20px;
    }
    .loading-text {
      font-size: 18px;
      color: #6a1b9a;
      display: flex;
      align-items: center;
    }
    .dot {
      height: 8px;
      width: 8px;
      margin: 0 3px;
      background-color: #6a1b9a;
      border-radius: 50%;
      animation: bounce 1.4s infinite;
    }
    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }
    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    @keyframes bounce {
      0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.4;
      }
      40% {
        transform: scale(1.4);
        opacity: 1;
      }
    }
  </style>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB6Eg-LcldmRn0UHdUN65DxHraJLv0Xfmw",
      authDomain: "the-yarn-nest-6b05f.firebaseapp.com",
      projectId: "the-yarn-nest-6b05f",
      storageBucket: "the-yarn-nest-6b05f.firebasestorage.app",
      messagingSenderId: "804872807159",
      appId: "1:804872807159:web:ae99a190e2884ab838e9f2"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, (user) => {
      if (user) {
        // Logged in → go to home instantly
        window.location.href = "home.html";
      } else {
        // Not logged in → show logo for 3 seconds
        setTimeout(() => {
          window.location.href = "signin.html";
        }, 3000);
      }
    });
  </script>
</head>
<body>
  <img src="logo.png" alt="The Yarn Nest Logo" class="logo">
  <div class="loading-text">
    Loading
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
  </div>
</body>
</html>
